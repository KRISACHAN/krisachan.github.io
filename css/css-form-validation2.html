<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>『极限版』不掺水，用纯 CSS 来实现完整的表单验证功能 | 鱼头的Web海洋</title>
    <meta name="description" content="让你的Web学习如同玩耍在海洋一样快乐" />
    <link rel="icon" href="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/base/blogfavicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.a57752fc.css" as="style"><link rel="preload" href="/assets/js/app.d3043404.js" as="script"><link rel="preload" href="/assets/js/21.3de99ba5.js" as="script"><link rel="prefetch" href="/assets/js/2.ee28eecc.js"><link rel="prefetch" href="/assets/js/3.4f75b704.js"><link rel="prefetch" href="/assets/js/4.a5a4cae9.js"><link rel="prefetch" href="/assets/js/5.478f5ac2.js"><link rel="prefetch" href="/assets/js/6.b7cf2f04.js"><link rel="prefetch" href="/assets/js/7.606f2be3.js"><link rel="prefetch" href="/assets/js/8.3f46aa1d.js"><link rel="prefetch" href="/assets/js/9.b22bdfb2.js"><link rel="prefetch" href="/assets/js/10.66b6a51e.js"><link rel="prefetch" href="/assets/js/11.7e6ee11d.js"><link rel="prefetch" href="/assets/js/12.00a57e71.js"><link rel="prefetch" href="/assets/js/13.a3ebb5cb.js"><link rel="prefetch" href="/assets/js/14.24257f57.js"><link rel="prefetch" href="/assets/js/15.e9fbe090.js"><link rel="prefetch" href="/assets/js/16.3274933f.js"><link rel="prefetch" href="/assets/js/17.c44a15a9.js"><link rel="prefetch" href="/assets/js/18.3e8897f2.js"><link rel="prefetch" href="/assets/js/19.726d2c1d.js"><link rel="prefetch" href="/assets/js/20.e2fc7334.js"><link rel="prefetch" href="/assets/js/22.2d7f189c.js"><link rel="prefetch" href="/assets/js/23.f634d9a0.js"><link rel="prefetch" href="/assets/js/24.b5ea9681.js"><link rel="prefetch" href="/assets/js/25.9a173b49.js"><link rel="prefetch" href="/assets/js/26.58d8d6a1.js"><link rel="prefetch" href="/assets/js/27.4d094b9b.js"><link rel="prefetch" href="/assets/js/28.e9e5a9d0.js"><link rel="prefetch" href="/assets/js/29.c7398cad.js"><link rel="prefetch" href="/assets/js/30.3f818bc8.js"><link rel="prefetch" href="/assets/js/31.262e735d.js"><link rel="prefetch" href="/assets/js/32.c8c080f8.js"><link rel="prefetch" href="/assets/js/33.64ce9b48.js"><link rel="prefetch" href="/assets/js/34.d1b3f4f2.js"><link rel="prefetch" href="/assets/js/35.b636dd89.js"><link rel="prefetch" href="/assets/js/36.92a33758.js"><link rel="prefetch" href="/assets/js/37.66170c6f.js"><link rel="prefetch" href="/assets/js/38.65ca6c6e.js"><link rel="prefetch" href="/assets/js/39.24ac3066.js"><link rel="prefetch" href="/assets/js/40.6b47533e.js"><link rel="prefetch" href="/assets/js/41.73219c4f.js"><link rel="prefetch" href="/assets/js/42.ef7505b0.js"><link rel="prefetch" href="/assets/js/43.2c58796e.js"><link rel="prefetch" href="/assets/js/44.8c57057b.js"><link rel="prefetch" href="/assets/js/45.3c8a38be.js"><link rel="prefetch" href="/assets/js/46.e734242d.js"><link rel="prefetch" href="/assets/js/47.1d5ab8d2.js"><link rel="prefetch" href="/assets/js/48.9127162c.js"><link rel="prefetch" href="/assets/js/49.79cd6647.js"><link rel="prefetch" href="/assets/js/50.3230b0d1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a57752fc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">鱼头的Web海洋</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!----> <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>『极限版』不掺水，用纯 CSS 来实现完整的表单验证功能</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/css/css-form-validation2.html#html" class="sidebar-link">HTML</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/css/css-form-validation2.html#required" class="sidebar-link">required</a></li><li class="sidebar-sub-header"><a href="/css/css-form-validation2.html#pattern" class="sidebar-link">pattern</a></li></ul></li><li><a href="/css/css-form-validation2.html#css" class="sidebar-link">CSS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/css/css-form-validation2.html#invalid-与-valid" class="sidebar-link">:invalid 与 :valid</a></li><li class="sidebar-sub-header"><a href="/css/css-form-validation2.html#placeholder-shown" class="sidebar-link">:placeholder-shown</a></li></ul></li><li><a href="/css/css-form-validation2.html#实现逻辑" class="sidebar-link">实现逻辑</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/css/css-form-validation2.html#初始化状态" class="sidebar-link">初始化状态</a></li><li class="sidebar-sub-header"><a href="/css/css-form-validation2.html#清空输入状态" class="sidebar-link">清空输入状态</a></li><li class="sidebar-sub-header"><a href="/css/css-form-validation2.html#输入错误状态" class="sidebar-link">输入错误状态</a></li><li class="sidebar-sub-header"><a href="/css/css-form-validation2.html#输入正确状态" class="sidebar-link">输入正确状态</a></li></ul></li><li><a href="/css/css-form-validation2.html#总结" class="sidebar-link">总结</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/css/css-form-validation2.html#参考资料" class="sidebar-link">参考资料</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/css/css-form-validation2.html#后记" class="sidebar-link">后记</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="『极限版』不掺水，用纯-css-来实现完整的表单验证功能"><a href="#『极限版』不掺水，用纯-css-来实现完整的表单验证功能" aria-hidden="true" class="header-anchor">#</a> 『极限版』不掺水，用纯 CSS 来实现完整的表单验证功能</h1> <blockquote><ul><li>作者：陈大鱼头</li> <li>github： <a href="https://github.com/KRISACHAN" target="_blank" rel="noopener noreferrer">KRISACHAN<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></blockquote> <p>去年的时候写过一篇文章 <a href="https://juejin.im/post/6844903848012677127" target="_blank" rel="noopener noreferrer">纯CSS实现表单验证<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ，在发表之后不久就有网友跟鱼头说，打算拿我这篇文章作团队内部分享。</p> <p>当时听到这个消息之后，在屏幕前的鱼头笑咧了嘴，但这位童鞋的下一段内容，就让我马上笑不起出来了。</p> <p>不过因为初始化状态是这样的：</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/css-form-validation/invalid.png" alt="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/css-form-validation/invalid.png"></p> <p>所以希望我能够改一下，改成这样：</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/css-form-validation2/1.png" alt="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/css-form-validation2/1.png"></p> <p>只有在进行输入且输入内容不对的时候才展示错误信息。</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/css-form-validation2/2.jpg" alt="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/css-form-validation2/2.jpg"></p> <p>这位童鞋：“所以这功能能实现吗？”</p> <p>我：“。。。。。。”</p> <p>既然有童鞋这么看得起鱼头，还打算拿鱼头的 <a href="https://codepen.io/krischan77/pen/WmVKYr" target="_blank" rel="noopener noreferrer">DEMO<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 来作内部分享，那总得硬着头皮来实现这个功能。</p> <p>首先我们来看一下最终成果图：</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/css-form-validation2/3.gif" alt="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/css-form-validation2/3.gif"></p> <p>DEMO 在线查看地址：https://codepen.io/krischan77/pen/WmVKYr</p> <p>各位读者童鞋，来跟鱼头一起拆分下功能实现：</p> <h2 id="html"><a href="#html" aria-hidden="true" class="header-anchor">#</a> HTML</h2> <p>首先我们来看 <code>HTML</code> 的源码</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>form<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>form<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>get<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/api/form<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    账号：
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">data-title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>账号<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>请输入正确的账号<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>\w{6,10}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>account<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>f-tips<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>请输入正确的账号<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
    密码：
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">data-title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>密码<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>请输入正确的密码<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>\w{6,10}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>f-tips<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>请输入正确的密码<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>提交<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>这里面的 <code>HTML</code> 标签都比较常规，但是我们要注意下 <code>&lt;input /&gt;</code> 所携带的几个属性：</p> <h3 id="required"><a href="#required" aria-hidden="true" class="header-anchor">#</a> required</h3> <p><code>&lt;input required/&gt;</code> 中的 <code>required</code> 是一个布尔属性，用来告诉浏览器这个 <code>&lt;input&gt;</code> 是否是必填项。</p> <p>我们来康康DEMO：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>section<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>请输入信息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/userInfo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>提交信息<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>效果如下：</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/css-form-validation2/4.gif" alt="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/css-form-validation2/4.gif"></p> <p>兼容性如下：</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/css-form-validation2/7.png" alt="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/css-form-validation2/7.png"></p> <p>原生样式体验也是不错的。</p> <h3 id="pattern"><a href="#pattern" aria-hidden="true" class="header-anchor">#</a> pattern</h3> <p>再来 <code>pattern</code> 属性。</p> <p><code>&lt;input pattern=&quot;&quot;&gt;</code> 用于校验输入 <code>value</code> 是否有效。</p> <p>我们康康DEMO：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>section<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>请输入 我爱鱼头<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>我爱鱼头<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">required</span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>提交信息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>效果如下：</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/css-form-validation2/5.gif" alt="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/css-form-validation2/5.gif"></p> <p>兼容性如下：</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/css-form-validation2/6.png" alt="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/css-form-validation2/6.png"></p> <p>不得不感慨，原生组件的能力也是很强的。</p> <h2 id="css"><a href="#css" aria-hidden="true" class="header-anchor">#</a> CSS</h2> <p>接下来我们康康CSS的部分，源码如下：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">:root</span> <span class="token punctuation">{</span>
    <span class="token property">--error-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.form &gt; input</span> <span class="token punctuation">{</span>
    <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.form &gt; .f-tips</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--error-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">input[type=&quot;text&quot;]:invalid ~ input[type=&quot;submit&quot;],
input[type=&quot;password&quot;]:invalid ~ input[type=&quot;submit&quot;]</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">input[required]:focus:invalid + span</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> inline<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">input[required]:empty + span</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">input[required]:invalid:not(:placeholder-shown) + span</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> inline<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们重点介绍以下几个 <code>CSS</code> 选择器：</p> <h3 id="invalid-与-valid"><a href="#invalid-与-valid" aria-hidden="true" class="header-anchor">#</a> :invalid 与 :valid</h3> <p>判断有效性的伪类选择器（<code>:valid</code>和<code>:invalid</code>）匹配有效或无效，<code>&lt;input&gt;</code>或<code>&lt;form&gt;</code>元素。</p> <p><code>:valid</code>伪类选择器表示值通过验证的<code>&lt;input&gt;</code>，这告诉用户他们的输入是有效的。</p> <p><code>:invalid</code>伪类选择器表示值不通过通过验证的<code>&lt;input&gt;</code>，这告诉用户他们的输入是无效的。</p> <p>例子如下：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style language-css">
    <span class="token selector">input:valid</span> <span class="token punctuation">{</span>
        <span class="token property">outline</span><span class="token punctuation">:</span> 1px solid green<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">input:invalid</span> <span class="token punctuation">{</span>
        <span class="token property">outline</span><span class="token punctuation">:</span> 1px solid red<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
输入文字：
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>[\w]+<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
输入电话号码：
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tel<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>[0-9]+<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>效果如下：</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/selectors-4/valid-demo.gif" alt="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/selectors-4/valid-demo.gif"></p> <p>兼容性如下：</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/selectors-4/valid.png" alt="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/selectors-4/valid.png"></p> <h3 id="placeholder-shown"><a href="#placeholder-shown" aria-hidden="true" class="header-anchor">#</a> :placeholder-shown</h3> <p><code>:placeholder-shown</code> 伪类 在 <code>&lt;input&gt;</code> 或 <code>&lt;textarea&gt;</code> 元素显示 placeholder text 时生效。</p> <p>例子如下：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style language-css">
    <span class="token selector">input</span> <span class="token punctuation">{</span>
        <span class="token property">border</span><span class="token punctuation">:</span> 2px solid black<span class="token punctuation">;</span>
        <span class="token property">padding</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token selector">input:placeholder-shown</span> <span class="token punctuation">{</span>
        <span class="token property">border-color</span><span class="token punctuation">:</span> silver<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Type something here!<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>效果如下：</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/selectors-4/placeholder-shown-demo.png" alt="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/selectors-4/placeholder-shown-demo.png"></p> <p>兼容性如下：</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/selectors-4/placeholder-shown.png" alt="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/selectors-4/placeholder-shown.png"></p> <h2 id="实现逻辑"><a href="#实现逻辑" aria-hidden="true" class="header-anchor">#</a> 实现逻辑</h2> <p>有了上面的几个 <code>&lt;input /&gt;</code> 属性以及 <code>css</code> 选择器的伪类说明，那么这个纯CSS实现表单验证的功能就变得简单多了。</p> <p>我们先来整理下功能要求：</p> <ol><li>初始化状态：不展示提交按钮以及错误提示</li> <li>清空输入状态：不展示提交按钮以及错误提示</li> <li>输入错误状态：输入框输入错误时，展示错误提示</li> <li>输入正确状态：输入框输入正确时，隐藏错误提示，展示提交按钮</li></ol> <h3 id="初始化状态"><a href="#初始化状态" aria-hidden="true" class="header-anchor">#</a> 初始化状态</h3> <p>首先我们知道，<strong>初始化</strong> 时，是没有提示信息的，所以提示信息可以直接隐藏，至于提交按钮，我们就利用 <code>:invalid</code> 来隐藏，因为初始化的 <code>input.value</code> 内容是不匹配的。所以我们有：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style language-css">
    <span class="token selector">.form &gt; .f-tips</span> <span class="token punctuation">{</span>
        <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--error-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token selector">input[type=&quot;text&quot;]:invalid ~ input[type=&quot;submit&quot;],
    input[type=&quot;password&quot;]:invalid ~ input[type=&quot;submit&quot;]</span> <span class="token punctuation">{</span>
        <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">data-title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>账号<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>请输入正确的账号<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>\w{6,10}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>account<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">data-title</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>密码<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>请输入正确的密码<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pattern</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>\w{6,10}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>f-tips<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>请输入正确的密码<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="清空输入状态"><a href="#清空输入状态" aria-hidden="true" class="header-anchor">#</a> 清空输入状态</h3> <p><strong>清空输入状态</strong> 也比较简单，可以直接用伪类选择器 <code>:empty</code> 来判断，只要内容为空，则隐藏错误信息，所以我们有：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">input[required]:empty + span</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="输入错误状态"><a href="#输入错误状态" aria-hidden="true" class="header-anchor">#</a> 输入错误状态</h3> <p>在 <strong>初始化</strong> 时已经隐藏了错误信息，而 <strong>初始化</strong> 其实也是依赖于 <strong>输入错误</strong> 这个状态，不过好在我们有伪类选择器 <code>:focus</code> ，它表示获得焦点的元素（如表单输入），所以我们有：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">input[required]:focus:invalid + span</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> inline<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>虽然我们不能通过 <strong>输入错误</strong> 这个状态来处理，但是我们可以监听用户聚焦的行为来实现。</p> <p>但是这么做有个弊端，就是当我在另外一个输入框输入信息的时候，错误提示也会消失，所以我们还需要判断是否有 <code>placeholder</code>，输入了 <code>value</code> ，自然没有 <code>placeholder</code> ，所以我们有：</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">input[required]:invalid:not(:placeholder-shown) + span</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> inline<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="输入正确状态"><a href="#输入正确状态" aria-hidden="true" class="header-anchor">#</a> 输入正确状态</h3> <p>当完成上述三个状态的实现之后， <strong>输入正确</strong> 的状态就可以不用编写了，因为不匹配错误的，就是匹配正确。</p> <h2 id="总结"><a href="#总结" aria-hidden="true" class="header-anchor">#</a> 总结</h2> <p>一个完整的 <strong>纯CSS表单功能</strong> 就这么完成了，DEMO地址在这：</p> <p>https://codepen.io/krischan77/pen/WmVKYr</p> <p>由于实际项目的复杂度，这个功能不一定直接用起来，但是里面的知识点，思路我们都是可以复用的。</p> <p>不得不感慨，如今 <code>html</code> 跟 <code>css</code> 的能力变得强大了起来，只要我们愿意散发思维，一定能编写出更多有意思，有价值的效果。</p> <p>欢迎大家多方尝试！</p> <h2 id="参考资料"><a href="#参考资料" aria-hidden="true" class="header-anchor">#</a> 参考资料</h2> <ol><li><a href="https://html.spec.whatwg.org/multipage/input.html#the-input-element" target="_blank" rel="noopener noreferrer">whatwg 4.10.5 The <code>input</code> element<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://juejin.im/post/6844903848012677127" target="_blank" rel="noopener noreferrer">纯CSS实现表单验证<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://juejin.im/post/6850037265461149703" target="_blank" rel="noopener noreferrer">『真香警告』这33个超级好用的CSS选择器，你可能见都没见过。<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Selectors" target="_blank" rel="noopener noreferrer">CSS 选择器<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol> <h2 id="后记"><a href="#后记" aria-hidden="true" class="header-anchor">#</a> 后记</h2> <p>如果你喜欢探讨技术，或者对本文有任何的意见或建议，非常欢迎加鱼头微信好友一起探讨，当然，鱼头也非常希望能跟你一起聊生活，聊爱好，谈天说地。
鱼头的微信号是：krisChans95
也可以扫码关注公众号，订阅更多精彩内容。
<img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/base/qrcode-all1.png" alt="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/base/qrcode-all1.png"></p></div> <div class="page-footer content">
    网站备案号：粤ICP备17113436号-1
  </div> <!----> <div class="right-group"><div class="item"><span class="title">加入前端鱼塘</span> <span class="desc">
        扫描二维码回复
        <span class="inner">加群</span> 学习
      </span> <img width="100%" src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/base/wx-qrcode.jpg"></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <div></div></div></div>
    <script src="/assets/js/21.3de99ba5.js" defer></script><script src="/assets/js/app.d3043404.js" defer></script>
    <!-- Hotjar Tracking Code for yuchengkai.cn -->
    <script>
      var _hmt = _hmt || []
      ;(function() {
        var hm = document.createElement('script')
        hm.src = 'https://hm.baidu.com/hm.js?52ee35894430604d0d3ce3b9c089adf9'
        var s = document.getElementsByTagName('script')[0]
        s.parentNode.insertBefore(hm, s)
      })()
    </script>
  </body>
</html>

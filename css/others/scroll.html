<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>忍法，scroll 翻滚之术！ | 鱼头的Web海洋</title>
    <meta name="description" content="让你的Web学习如同玩耍在海洋一样快乐" />
    <link rel="icon" href="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/base/blogfavicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.a57752fc.css" as="style"><link rel="preload" href="/assets/js/app.c5a7454e.js" as="script"><link rel="preload" href="/assets/js/26.0ce95665.js" as="script"><link rel="prefetch" href="/assets/js/2.ee28eecc.js"><link rel="prefetch" href="/assets/js/3.4f75b704.js"><link rel="prefetch" href="/assets/js/4.f573eaec.js"><link rel="prefetch" href="/assets/js/5.478f5ac2.js"><link rel="prefetch" href="/assets/js/6.4c097f64.js"><link rel="prefetch" href="/assets/js/7.58a8b71c.js"><link rel="prefetch" href="/assets/js/8.3f46aa1d.js"><link rel="prefetch" href="/assets/js/9.b22bdfb2.js"><link rel="prefetch" href="/assets/js/10.66b6a51e.js"><link rel="prefetch" href="/assets/js/11.7e6ee11d.js"><link rel="prefetch" href="/assets/js/12.00a57e71.js"><link rel="prefetch" href="/assets/js/13.a3ebb5cb.js"><link rel="prefetch" href="/assets/js/14.24257f57.js"><link rel="prefetch" href="/assets/js/15.e9fbe090.js"><link rel="prefetch" href="/assets/js/16.3274933f.js"><link rel="prefetch" href="/assets/js/17.c44a15a9.js"><link rel="prefetch" href="/assets/js/18.9d746e2b.js"><link rel="prefetch" href="/assets/js/19.baae15bc.js"><link rel="prefetch" href="/assets/js/20.9aaca5ee.js"><link rel="prefetch" href="/assets/js/21.aec3f975.js"><link rel="prefetch" href="/assets/js/22.21ec2527.js"><link rel="prefetch" href="/assets/js/23.215265ec.js"><link rel="prefetch" href="/assets/js/24.32608e97.js"><link rel="prefetch" href="/assets/js/25.a29407a4.js"><link rel="prefetch" href="/assets/js/27.2bec40fe.js"><link rel="prefetch" href="/assets/js/28.37c3e242.js"><link rel="prefetch" href="/assets/js/29.25240822.js"><link rel="prefetch" href="/assets/js/30.b2239b28.js"><link rel="prefetch" href="/assets/js/31.3232657a.js"><link rel="prefetch" href="/assets/js/32.2c64e26e.js"><link rel="prefetch" href="/assets/js/33.2f410f00.js"><link rel="prefetch" href="/assets/js/34.7bbb4327.js"><link rel="prefetch" href="/assets/js/35.31641123.js"><link rel="prefetch" href="/assets/js/36.ee53c3f2.js"><link rel="prefetch" href="/assets/js/37.1cc74cfa.js"><link rel="prefetch" href="/assets/js/38.9a4a47b9.js"><link rel="prefetch" href="/assets/js/39.1a9f045d.js"><link rel="prefetch" href="/assets/js/40.cf629f6b.js"><link rel="prefetch" href="/assets/js/41.014b5065.js"><link rel="prefetch" href="/assets/js/42.0e97650c.js"><link rel="prefetch" href="/assets/js/43.e9a09c8e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a57752fc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">鱼头的Web海洋</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!----> <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>忍法，scroll 翻滚之术！</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/css/others/scroll.html#前言" class="sidebar-link">前言</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/css/others/scroll.html#web-api-中的-scroll-家族" class="sidebar-link">Web API 中的 scroll 家族</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/css/others/scroll.html#scroll-与-scrollto" class="sidebar-link">scroll 与 scrollTo</a></li><li class="sidebar-sub-header"><a href="/css/others/scroll.html#scrollby" class="sidebar-link">scrollBy</a></li><li class="sidebar-sub-header"><a href="/css/others/scroll.html#element-scrollintoview" class="sidebar-link">Element.scrollIntoView</a></li></ul></li><li><a href="/css/others/scroll.html#css-scroll" class="sidebar-link">CSS scroll</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/css/others/scroll.html#scroll-behavior" class="sidebar-link">scroll-behavior</a></li><li class="sidebar-sub-header"><a href="/css/others/scroll.html#scroll-snap" class="sidebar-link">Scroll Snap</a></li></ul></li><li><a href="/css/others/scroll.html#css-overscroll" class="sidebar-link">CSS overscroll</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/css/others/scroll.html#overscroll-behavior" class="sidebar-link">overscroll-behavior</a></li></ul></li><li><a href="/css/others/scroll.html#课外姿势" class="sidebar-link">课外姿势</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/css/others/scroll.html#新旧逻辑属性" class="sidebar-link">新旧逻辑属性</a></li></ul></li><li><a href="/css/others/scroll.html#最后来个特效" class="sidebar-link">最后来个特效</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/css/others/scroll.html#后记" class="sidebar-link">后记</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/css/others/scroll.html#参考资料" class="sidebar-link">参考资料</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/css/others/scroll.html#后记-2" class="sidebar-link">后记</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="忍法，scroll-翻滚之术！"><a href="#忍法，scroll-翻滚之术！" aria-hidden="true" class="header-anchor">#</a> 忍法，scroll 翻滚之术！</h1> <blockquote><ul><li>作者：陈大鱼头</li> <li>github： <a href="https://github.com/KRISACHAN" target="_blank" rel="noopener noreferrer">KRISACHAN<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></blockquote> <h2 id="前言"><a href="#前言" aria-hidden="true" class="header-anchor">#</a> 前言</h2> <p>在日常的开发中，我们对 <strong><code>scroll</code></strong> 这个单词肯定不陌生。</p> <p>例如因为看不惯浏览器默认样式而用 JS 一顿猛如虎操作的 <strong>自定义滚动条</strong> 。</p> <p>或者是嗖~一下就到顶的 <strong>回到顶部</strong> 。</p> <p>又或者是想去哪点哪的 <strong>标题导航</strong> 。</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/scroll/1.jpg" alt></p> <p>但是在过去的开发中，要实现这些功能并不是那么轻松的一件事情。</p> <p>例如我们要实现一个有滚动效果的 <strong>回到顶部</strong> 功能，我们可能需要写下这些代码。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> backTop <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#backTop&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
backTop<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> startTime <span class="token operator">=</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> scrollTop <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
  <span class="token keyword">let</span> totalTime <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
  timer <span class="token operator">=</span> <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> lastTime <span class="token operator">=</span> totalTime <span class="token operator">-</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> startTime <span class="token operator">-</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> totalTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span>
      <span class="token punctuation">(</span>lastTime <span class="token operator">*</span> <span class="token operator">-</span>scrollTop<span class="token punctuation">)</span> <span class="token operator">/</span> totalTime <span class="token operator">+</span> scrollTop<span class="token punctuation">;</span>
    timer <span class="token operator">=</span> <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>lastTime <span class="token operator">===</span> totalTime<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>（免责声明：伪代码未经测试，如有 BUG，跪求原谅。）</p> <p>嘤，意思就是要写个动画，不断修改当前页面的垂直滚动距离，直到为 0。</p> <p>（吃瓜群众：“很难嘛？是你太菜了吧，大叔！”）</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/scroll/19.png" alt></p> <p>但其实随着时间的推移， <strong>web api</strong> 以及 <strong>css</strong> 规范的不断改进，那些我们曾经认为实现起来很麻烦的功能也变得简单了起来。下面我们可以一起来探讨一下这些改进的内容。</p> <h2 id="web-api-中的-scroll-家族"><a href="#web-api-中的-scroll-家族" aria-hidden="true" class="header-anchor">#</a> Web API 中的 scroll 家族</h2> <p>我们来康康 <strong>scroll 家族</strong> 里有趣的 API。</p> <h3 id="scroll-与-scrollto"><a href="#scroll-与-scrollto" aria-hidden="true" class="header-anchor">#</a> scroll 与 scrollTo</h3> <p><strong><code>scroll()</code></strong> 与 <strong><code>scrollTo</code></strong> 方法是用于在给定的元素中滚动到某个特定坐标的 <strong>Element</strong> 接口。</p> <p>语法如下：</p> <ol><li><p><code>scroll/scrollTo(x, y)</code></p> <ul><li><code>x</code>：元素要移动的位置横坐标。</li> <li><code>y</code>：元素要移动的位置纵坐标。</li></ul></li> <li><p><code>scroll/scrollTo(options)</code></p> <p><code>options</code>支持属性有<code>left</code>，<code>top</code>以及<code>behavior</code></p> <ul><li><code>top</code>：元素要移动的位置横坐标。</li> <li><code>left</code>：元素要移动的位置纵坐标。</li> <li><code>behavior</code>：元素的运动模式，如果是<code>auto</code>，则没有动画效果，如果是<code>smooth</code>，则是平滑滚动。</li></ul></li></ol> <p>我们来康康栗子：</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/scroll/4.gif" alt></p> <p>上面例子来自 MDN 的 GitHub 仓库<a href="https://github.com/mdn/dom-examples/blob/master/scrolltooptions/index.html" target="_blank" rel="noopener noreferrer">dom-examples<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>核心 JS 代码如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> scrollOptions<span class="token punctuation">;</span>

<span class="token keyword">const</span> form <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;form&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> leftInput <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;left&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> topInput <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;top&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> scrollInput <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;scroll&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

form<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;submit&quot;</span><span class="token punctuation">,</span> e <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  scrollOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
    left<span class="token punctuation">:</span> leftInput<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
    top<span class="token punctuation">:</span> topInput<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
    behavior<span class="token punctuation">:</span> scrollInput<span class="token punctuation">.</span>checked <span class="token operator">?</span> <span class="token string">&quot;smooth&quot;</span> <span class="token punctuation">:</span> <span class="token string">&quot;auto&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  window<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span>scrollOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="scrollby"><a href="#scrollby" aria-hidden="true" class="header-anchor">#</a> scrollBy</h3> <p><strong><code>scrollBy()</code></strong> 方法是使得元素滚动一段特定距离的 <strong>Element</strong> 接口。</p> <p>语法如下：</p> <ol><li><p><strong>scrollBy(x, y)</strong></p> <ul><li><code>x</code>：元素要移动的位置横坐标。</li> <li><code>y</code>：元素要移动的位置纵坐标。</li></ul></li> <li><p><strong>scrollBy(options)</strong></p> <p><code>options</code>支持属性有<code>left</code>，<code>top</code>以及<code>behavior</code></p> <ul><li><code>top</code>：元素要移动的位置横坐标。</li> <li><code>lef：</code>：元素要移动的位置纵坐标。</li> <li><code>behavior</code>：元素的运动模式，如果是<code>auto</code>，则没有动画效果，如果是<code>smooth</code>，则是平滑滚动。</li></ul></li></ol> <p>再举个栗子：</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/scroll/5.gif" alt></p> <p>核心代码如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> scrollOptions<span class="token punctuation">;</span>

<span class="token keyword">const</span> form <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;form&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> leftInput <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;left&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> topInput <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;top&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> scrollInput <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;scroll&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

form<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;submit&quot;</span><span class="token punctuation">,</span> e <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  scrollOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
    left<span class="token punctuation">:</span> leftInput<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
    top<span class="token punctuation">:</span> topInput<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
    behavior<span class="token punctuation">:</span> scrollInput<span class="token punctuation">.</span>checked <span class="token operator">?</span> <span class="token string">&quot;smooth&quot;</span> <span class="token punctuation">:</span> <span class="token string">&quot;auto&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  window<span class="token punctuation">.</span><span class="token function">scrollBy</span><span class="token punctuation">(</span>scrollOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Mmmmm，没错，就是只是把上面的 DEMO 中的<code>scrollTo</code>改为<code>scrollBy</code>而已。非常的机智~</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/scroll/6.gif" alt></p> <p>我们再来看看上述三个API的兼容性：</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/scroll/24.png" alt></p> <p>Mmmm，兼容性挺好的。</p> <p>（吃瓜群众：IE没有人权？？？？？？？？？）</p> <h3 id="element-scrollintoview"><a href="#element-scrollintoview" aria-hidden="true" class="header-anchor">#</a> Element.scrollIntoView</h3> <p><strong><code>Element.scrollIntoView()</code></strong> 方法可以让当前的元素滚动到浏览器窗口的可视区域内。</p> <p>语法如下：</p> <ol><li><p><strong>scrollIntoView(alignToTop)</strong></p> <p><code>alignToTop</code>是一个布尔值，如果不填则默认为<code>true</code>。相当于<code>{block: 'start', inline: ‘nearest‘}</code>。</p> <p>如果值为<code>true</code>，则元素的顶端将和其所在滚动区的可视区域的顶端对齐。如果为<code>false</code>，则是底端对齐。相当于<code>{block: 'end', inline: 'nearest'}</code></p></li> <li><p><strong>scrollIntoView(scrollIntoViewOptions)</strong></p> <p><code>scrollIntoViewOptions</code>包含下列属性的对象：</p> <ul><li><code>behavior</code>：元素的运动模式，如果是<code>auto</code>，则没有动画效果，如果是<code>smooth</code>，则是平滑滚动。</li> <li><code>block</code>：定义垂直方向的对齐方式，值可以是 <code>start</code>，<code>center</code>， <code>end</code>或 <code>nearest</code>之一。默认为 <code>nearest</code>。</li> <li><code>inline</code>：定义水平方向的对齐方式，值可以是 <code>start</code>，<code>center</code>， <code>end</code>或 <code>nearest</code>之一。默认为 <code>nearest</code>。</li></ul></li></ol> <p>来来来，我给大家解释一下<code>block</code>跟<code>inline</code>的可选值到底是怎么回事：</p> <ul><li><code>start</code>：跟当前元素它爹的头发（顶部）对齐。</li> <li><code>center</code>：跟当前元素它爹的肚子（中间）对齐。</li> <li><code>end</code>：跟当前元素它爹的 jio（底部）对齐。</li> <li><code>nearest</code>：就近原则，挨哪里近去哪，如果在中间就不动。</li></ul> <p>如果是<code>block</code>，就当元素是站着的（从上往下），如果是<code>inline</code>，就当元素是躺着的（从左到右）。当然，前提是默认的<code>writing-mode: horizontal-tb</code>。</p> <p>有点绕？快来康康栗子呀：https://codepen.io/krischan77/pen/mdJMQpz</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/scroll/7.gif" alt></p> <p>好了，上述就是杀马特，哦不是，<code>scroll</code>家族的特性了。（废弃或准备废弃的就没往上写了。）</p> <p>最后我们同样来看看兼容性：</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/scroll/25.png" alt></p> <p>嗯，还行，IE都能用了。。。</p> <p>至此，我们Web AP里的杀马特家族，哦不是，scroll家族已介绍完毕，像<code>Element.scrollIntoViewIfNeed</code>这种不染发（不是标准）的API，就没有介绍了，有兴趣的可以自己去看看它到底能干啥。</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/scroll/3.jpg" alt></p> <h2 id="css-scroll"><a href="#css-scroll" aria-hidden="true" class="header-anchor">#</a> CSS scroll</h2> <p>分享完 JS 中的 <strong><code>scroll</code></strong> ，我们再来了解下 CSS 中的 <strong><code>scroll</code></strong> 。</p> <h3 id="scroll-behavior"><a href="#scroll-behavior" aria-hidden="true" class="header-anchor">#</a> scroll-behavior</h3> <p>我们上面在讲这个 JS 中的 <strong><code>scroll</code></strong> 时，多次提到一个单词叫“<code>behavior</code>”。</p> <p>Mmmm，所以你们猜猜这个<code>scroll-behavior</code>跟 JS 里的<code>behavior</code>有木有关系？</p> <p>嗯，没错，你们猜对啦，是有关系的。</p> <p>（吃瓜群众：“都没人理你~”）</p> <p><code>scroll-behavior</code>跟上述各个<code>scroll</code>API 里的<code>behavior</code>一样，是用来定义页面进行滚动操作时的动画效果。</p> <p>如果定义为<code>smooth</code>，则页面触发滚动操作时，就会有滚动的效果，如果为<code>auto</code>，则跟原来一样，是瞬间移动到指定位置。这指的是类似于点击<code>#hash</code>跳转一样的触发，而不是滑动滚动条。</p> <p>其效果可以参照本文第一小节的 DEMO。</p> <p>兼容性就如图：</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/scroll/25.png" alt></p> <h3 id="scroll-snap"><a href="#scroll-snap" aria-hidden="true" class="header-anchor">#</a> Scroll Snap</h3> <p><strong>CSS Scroll Snap</strong> 是 CSS 中一个比较新的独立模块，它的第一个正式版本<a href="https://www.w3.org/TR/css-scroll-snap-1" target="_blank" rel="noopener noreferrer">CSS Scroll Snap 模块 Level 1<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>也是在 2019 年 3 月 19 日才发布。</p> <p><strong>CSS Scroll Snap 模块</strong> 可以让页面容器停止滚动时，捕捉并让其自动滑动到指定元素的指定位置。</p> <p>一给我哩 giaogiao！这可是非常了不起的特性啊~</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/scroll/13.jpg" alt></p> <p>它分了两部分，一部分作用于滚动容器上，一部分作用于相对的滚动子元素上，具体关系如下表：</p> <table><thead><tr><th>作用于滚动容器</th> <th>作用于滚动子元素</th></tr></thead> <tbody><tr><td>scroll-snap-type</td> <td>scroll-snap-align</td></tr> <tr><td>scroll-padding</td> <td>scroll-snap-stop</td></tr> <tr><td></td> <td>scroll-margin</td></tr></tbody></table> <h4 id="scroll-snap-type"><a href="#scroll-snap-type" aria-hidden="true" class="header-anchor">#</a> scroll-snap-type</h4> <p><code>scroll-snap-type</code>属性指定能不能去捕捉当前滚动的容器并让它对齐，以及所执行的方向跟严格程度。</p> <p>它可选的方向值有：</p> <ul><li><code>x</code> ：捕捉 X 轴上的位置</li> <li><code>y</code> ：捕捉 Y 轴上的位置</li> <li><code>block</code> ：捕捉块轴上的位置（逻辑意义上与 y 一样）</li> <li><code>inline</code> ：捕捉内联轴上的位置（逻辑意义上与 x 一样）</li> <li><code>both</code> ：捕捉两个方向上的位置</li></ul> <p>它可选的严格值有：</p> <ul><li><code>none</code> ：默认值，Mmmm，啥也不干</li> <li><code>proximity</code> ：一个感性的值，如果元素进入到了容器的捕捉位置范围内，则进行捕捉并滚动，否则就不管，至于这个范围是多少，约莫着 45%的位置吧（手动测的，W3C 没给出具体算法，瞎猜吧，哈哈哈）。</li> <li><code>mandatory</code> ：一个靠谱点的值，只要有参数，停止滚动时就肯定能对齐。</li></ul> <p>我们来康康这玩意到底是啥效果：</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/scroll/14.gif" alt></p> <p>以上 DEMO 来自于 MDN 的<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/scroll-snap-type" target="_blank" rel="noopener noreferrer">scroll-snap-type<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="scroll-snap-align"><a href="#scroll-snap-align" aria-hidden="true" class="header-anchor">#</a> scroll-snap-align</h4> <p><code>scroll-snap-align</code>属性指定捕捉容器要捕捉的捕捉子元素位置。可选的值如下：</p> <ul><li><code>none</code> ：默认值，啥也不干 0.0。</li> <li><code>start</code> ：跟开始位置对齐。</li> <li><code>end</code> ：跟结束位置对齐。</li> <li><code>center</code> ：居中对齐。</li></ul> <p>效果如下：</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/scroll/15.gif" alt></p> <p>以上 DEMO 来自于 Andy Adams 的<a href="https://css-tricks.com/almanac/properties/s/scroll-snap-align/" target="_blank" rel="noopener noreferrer">scroll-snap-align<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="scroll-snap-stop"><a href="#scroll-snap-stop" aria-hidden="true" class="header-anchor">#</a> scroll-snap-stop</h4> <p>因为 <strong>Scroll Snap</strong> 元素会有几个捕捉的位置，而<code>scroll-snap-stop</code>可以控制到达这些位置之后是否被捕获，还是到了指定的位置才被捕获。可选属性如下：</p> <ul><li><code>normal</code> ：默认值，滚动的时候，可以忽略捕捉位置。</li> <li><code>always</code> ：滚动的时候，不能忽略捕捉位置，还必须定位到第一个捕捉元素的位置。</li></ul> <p>栗子如下：</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/scroll/16.gif" alt></p> <p>以上 DEMO 来自于 MDN 的<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/scroll-snap-stop" target="_blank" rel="noopener noreferrer">scroll-snap-stop<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="scroll-margin"><a href="#scroll-margin" aria-hidden="true" class="header-anchor">#</a> scroll-margin</h4> <p><code>scroll-margin</code>是一个简写属性，跟<code>margin</code>一样，有不同的逻辑属性可以选。它可以设置元素跟滚动条之间的外边框大小。我们看两个动图对比下区别。</p> <p>当我们点击<code>#hash</code>跳转时。</p> <p>普通操作：</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/scroll/8.gif" alt></p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">h3</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><p>添加了<code>scroll-margin-top</code>：</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/scroll/9.gif" alt></p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">h3</span> <span class="token punctuation">{</span>
  <span class="token property">scroll-margin-top</span><span class="token punctuation">:</span> 5rem<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上面 DEMO 来自于 Chris Coyier 的<a href="https://css-tricks.com/fixed-headers-and-jump-links-the-solution-is-scroll-margin-top/" target="_blank" rel="noopener noreferrer">Fixed Headers and Jump Links? The Solution is scroll-margin-top<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>从上面的两个 DEMO，我们可以清晰地对比，假设<code>#hash</code>导航的元素有修改<code>scroll-margin</code>，那么最终跳转的位置是会以<code>scroll-margin</code>的值为边界的。</p> <p>不仅如此，我们再看下面的 DEMO：</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/scroll/10.gif" alt></p> <p>以上 DEMO 源自于 Andy Adams 的<a href="https://css-tricks.com/almanac/properties/s/scroll-margin/" target="_blank" rel="noopener noreferrer">scroll-margin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>当我们设置了<code>scroll-margin</code>的元素进入 scroll 的可视区域时，浏览器会根据当前元素就近的<code>scroll-margin</code>值，移动到相应的位置。</p> <p><code>scroll-margin</code>的复写属性有以下几个：</p> <ul><li><code>scroll-margin-top</code></li> <li><code>scroll-margin-right</code></li> <li><code>scroll-margin-bottom</code></li> <li><code>scroll-margin-left</code></li> <li><code>scroll-margin-block</code></li> <li><code>scroll-margin-inline</code></li> <li><code>scroll-margin-block-start</code></li> <li><code>scroll-margin-inline-start</code></li> <li><code>scroll-margin-block-end</code></li> <li><code>scroll-margin-inline-end</code></li></ul> <h4 id="scroll-padding"><a href="#scroll-padding" aria-hidden="true" class="header-anchor">#</a> scroll-padding</h4> <p><code>scroll-padding</code>跟<code>scroll-margin</code>类型，只不过跟<code>padding</code>与<code>margin</code>的一样，有内外边距的区别。</p> <p>来个 DEMO：</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/scroll/11.gif" alt></p> <p>以上 DEMO 源自于 Andy Adams 的<a href="https://css-tricks.com/almanac/properties/s/scroll-padding/" target="_blank" rel="noopener noreferrer">scroll-padding<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><code>scroll-padding</code>的复写属性也同样有以下几个：</p> <ul><li><code>scroll-padding-top</code></li> <li><code>scroll-padding-right</code></li> <li><code>scroll-padding-bottom</code></li> <li><code>scroll-padding-left</code></li> <li><code>scroll-padding-block</code></li> <li><code>scroll-padding-inline</code></li> <li><code>scroll-padding-block-start</code></li> <li><code>scroll-padding-inline-start</code></li> <li><code>scroll-padding-block-end</code></li> <li><code>scroll-padding-inline-end</code></li></ul> <p>以上API兼容性如下：</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/scroll/28.png" alt></p> <h2 id="css-overscroll"><a href="#css-overscroll" aria-hidden="true" class="header-anchor">#</a> CSS overscroll</h2> <h3 id="overscroll-behavior"><a href="#overscroll-behavior" aria-hidden="true" class="header-anchor">#</a> overscroll-behavior</h3> <p><code>overscroll-behavior</code>是 2019 年 6 月份 W3C 第一次发布的<a href="https://www.w3.org/TR/css-overscroll-1/" target="_blank" rel="noopener noreferrer">CSS 过渡滚动行为模块 Level 1<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>里唯一一个属性。</p> <p><code>overscroll-behavior</code>让你可以控制浏览器滚动到边界时的表现。</p> <p>它也是个简写属性，具体的属性有：</p> <ul><li><code>overscroll-behavior-x</code> ：正常情况下，处理横轴滚动条滚动到边界时的表现。</li> <li><code>overscroll-behavior-y</code> ：正常情况下，处理纵轴滚动条滚动到边界时的表现。</li> <li><code>overscroll-behavior-inline</code> ：跟<code>overscroll-behavior-x</code>一样。</li> <li><code>overscroll-behavior-block</code> ：跟<code>overscroll-behavior-y</code>一样</li></ul> <p>可选的值为：</p> <ul><li><code>auto</code> ：默认值。</li> <li><code>contain</code> ：当一个元素滚动到边界时，不会再影响临近的滚动元素。</li> <li><code>none</code> ：当一个元素滚动到边界时，不仅不会不会再影响临近的滚动元素，连默认滚动到边界的表现都会被阻止。</li></ul> <p>栗子如下：</p> <p>使用了<code>overscroll-behavior: contain;</code></p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/scroll/17.gif" alt></p> <p>默认情况</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/scroll/18.gif" alt></p> <p>兼容性如下：</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/scroll/27.png" alt></p> <h2 id="课外姿势"><a href="#课外姿势" aria-hidden="true" class="header-anchor">#</a> 课外姿势</h2> <h3 id="新旧逻辑属性"><a href="#新旧逻辑属性" aria-hidden="true" class="header-anchor">#</a> 新旧逻辑属性</h3> <p>不知道各位有没有注意上述各个属性的值，除了有常规的<code>x</code>，<code>y</code>，<code>top</code>，<code>right</code>，<code>bottom</code>跟<code>left</code>之外，还有四个比较少见的值<code>block</code>，<code>inline</code>，<code>start</code>跟<code>end</code>。</p> <p>所以这到底是什么呢？</p> <p>其实是因为 W3C 为了照顾到非西文排序国家的书写习惯，特意修改了 CSS 的逻辑属性。</p> <p>对于像我们国家或者是美国这样，文档排列是从上到下，从左到右的，<code>top</code> 、 <code>right</code> 、 <code>bottom</code>跟 <code>left</code>就很好理解。</p> <p>但是像日本或者阿拉伯等书写排列跟我们不一样的国家，在逻辑上就会有不合理的地方，例如：</p> <ul><li>在阿拉伯，他们的<code>padding-left</code>实际上方向是我们的<code>padding-right</code></li> <li>在日本，他们的<code>padding-left</code>实际上方向是我们的<code>padding-top</code></li></ul> <p>按照上面的情况，这就比较诡异。所以 W3C 出来新的逻辑属性，新旧的对比如下：</p> <table><thead><tr><th>旧的逻辑属性</th> <th>新的逻辑属性</th></tr></thead> <tbody><tr><td>top</td> <td>inset-block-start</td></tr> <tr><td>bottom</td> <td>inset-block-end</td></tr> <tr><td>left</td> <td>inset-inline-start</td></tr> <tr><td>right</td> <td>inset-inline-end</td></tr> <tr><td>margin-top</td> <td>margin-block-start</td></tr> <tr><td>margin-right</td> <td>margin-inline-end</td></tr> <tr><td>margin-bottom</td> <td>margin-block-end</td></tr> <tr><td>margin-left</td> <td>margin-inline-start</td></tr> <tr><td>border-top</td> <td>border-block-start</td></tr> <tr><td>border-right</td> <td>border-inline-end</td></tr> <tr><td>border-bottom</td> <td>border-block-end</td></tr> <tr><td>border-left</td> <td>border-inline-start</td></tr> <tr><td>padding-top</td> <td>padding-block-start</td></tr> <tr><td>padding-right</td> <td>padding-inline-end</td></tr> <tr><td>padding-bottom</td> <td>padding-block-end</td></tr> <tr><td>padding-left</td> <td>padding-inline-start</td></tr> <tr><td>width</td> <td>inline-size</td></tr> <tr><td>height</td> <td>block-size</td></tr></tbody></table> <p>总结一下就是横坐标为<code>inline</code>，纵坐标为<code>block</code>，起始位置为<code>start</code>，结束位置为<code>end</code>。</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/scroll/22.jpg" alt></p> <h2 id="最后来个特效"><a href="#最后来个特效" aria-hidden="true" class="header-anchor">#</a> 最后来个特效</h2> <p>这是一个利用<code>scroll-behavior: smooth</code>的特性写出来的效果，之前跟朋友们一起出去玩，我们进行了许多的活动。其中有一项游戏就是“你比划我猜”，作为策划者的鱼头，自然不能放过这次机会，遂用技术小秀了一把。</p> <p>我们先来看看效果。</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/scroll/20.gif" alt></p> <p>源码地址在这：</p> <p>https://codepen.io/krischan77/pen/zYOjyry</p> <p>由于代码太长，就不完全贴出来了，但是核心逻辑就是利用<code>scroll-behavior: smooth;</code>来控制<code>#hash</code>跳转时的效果，为了不污染 url，同时利用了 <strong>history api</strong> 来维护正常的 url。大概就是酱紫：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> pageIndex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">urlChangeHandler</span> <span class="token operator">=</span> event <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> newURL <span class="token punctuation">}</span> <span class="token operator">=</span> event<span class="token punctuation">;</span>
  <span class="token keyword">const</span> current <span class="token operator">=</span> newURL<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/.+\#page\-(\d)/</span><span class="token punctuation">,</span> <span class="token string">&quot;$1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  pageIndex <span class="token operator">=</span> <span class="token operator">+</span>current<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pageIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
  history<span class="token punctuation">.</span><span class="token function">pushState</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">,</span>
    window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>origin <span class="token operator">+</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>onhashchange <span class="token operator">=</span> urlChangeHandler<span class="token punctuation">;</span>
</code></pre></div><p>大家也不妨尝试下用所掌握的姿势增添点生活情趣呀~</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/scroll/21.jpg" alt></p> <h2 id="后记"><a href="#后记" aria-hidden="true" class="header-anchor">#</a> 后记</h2> <p>吃瓜群众：我看完了整篇，没看到哪里有跟忍术相关的内容啊？骗我流量，赔钱。</p> <p>鱼头：没有又咋啦？说好的宠我，你现在凶我是什么意思？</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/css/scroll/23.gif" alt></p> <h2 id="参考资料"><a href="#参考资料" aria-hidden="true" class="header-anchor">#</a> 参考资料</h2> <ol><li><a href="https://stackoverflow.com/questions/48634459/scrollintoview-block-vs-inline" target="_blank" rel="noopener noreferrer">scrollIntoView block vs inline<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.w3.org/TR/cssom-view-1/" target="_blank" rel="noopener noreferrer">CSSOM View Module<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/scrollIntoView" target="_blank" rel="noopener noreferrer">Element.scrollIntoView()<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.w3.org/TR/css-scroll-snap-1/" target="_blank" rel="noopener noreferrer">CSS Scroll Snap Module Level 1<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://css-tricks.com/almanac/properties/s/scroll-snap-type/" target="_blank" rel="noopener noreferrer">CSS TRICK scroll-snap-type<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/scroll-snap-type" target="_blank" rel="noopener noreferrer">MDN scroll-snap-type<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://css-tricks.com/almanac/properties/s/scroll-snap-align/" target="_blank" rel="noopener noreferrer">CSS TRICK scroll-snap-align<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/scroll-snap-stop" target="_blank" rel="noopener noreferrer">scroll-snap-stop<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://css-tricks.com/almanac/properties/s/scroll-margin/" target="_blank" rel="noopener noreferrer">scroll-margin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://css-tricks.com/almanac/properties/s/scroll-padding/" target="_blank" rel="noopener noreferrer">scroll-padding<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://css-tricks.com/fixed-headers-and-jump-links-the-solution-is-scroll-margin-top/" target="_blank" rel="noopener noreferrer">Fixed Headers and Jump Links? The Solution is scroll-margin-top<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://caniuse.com/" target="_blank" rel="noopener noreferrer">caniuse<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol> <h2 id="后记-2"><a href="#后记-2" aria-hidden="true" class="header-anchor">#</a> 后记</h2> <p>如果你喜欢探讨技术，或者对本文有任何的意见或建议，非常欢迎加鱼头微信好友一起探讨，当然，鱼头也非常希望能跟你一起聊生活，聊爱好，谈天说地。
鱼头的微信号是：krisChans95
也可以扫码关注公众号，订阅更多精彩内容。</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/base/qrcode-all1.png" alt="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/base/qrcode-all1.png"></p></div> <div class="page-footer content">
    网站备案号：粤ICP备17113436号-1
  </div> <!----> <div class="right-group"><div class="item"><span class="title">加入前端鱼塘</span> <span class="desc">
        扫描二维码回复
        <span class="inner">加群</span> 学习
      </span> <img width="100%" src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/base/wx-qrcode.jpg"></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <div></div></div></div>
    <script src="/assets/js/26.0ce95665.js" defer></script><script src="/assets/js/app.c5a7454e.js" defer></script>
    <!-- Hotjar Tracking Code for yuchengkai.cn -->
    <script>
      var _hmt = _hmt || []
      ;(function() {
        var hm = document.createElement('script')
        hm.src = 'https://hm.baidu.com/hm.js?52ee35894430604d0d3ce3b9c089adf9'
        var s = document.getElementsByTagName('script')[0]
        s.parentNode.insertBefore(hm, s)
      })()
    </script>
  </body>
</html>

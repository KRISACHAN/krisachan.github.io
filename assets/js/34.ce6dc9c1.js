(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{204:function(t,s,a){"use strict";a.r(s);var n=a(0),o=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),a("blockquote",[a("ul",[a("li",[t._v("作者：陈大鱼头")]),t._v(" "),a("li",[t._v("github： "),a("a",{attrs:{href:"https://github.com/KRISACHAN",target:"_blank",rel:"noopener noreferrer"}},[t._v("KRISACHAN"),a("OutboundLink")],1)])])]),t._v(" "),t._m(1),t._v(" "),a("p",[t._v("如果 戈戈 与 狄狄 像我们监听页面元素变化那样监听戈多的动态，是不是就不会出现空欢喜的状态？是不是就不用等得那么辛苦？是不是甚至可以主动去寻找戈多？")]),t._v(" "),t._m(2),t._v(" "),a("p",[t._v("说起监听页面元素变化，那么你可知道有哪些方法可以实现这个功能？")]),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),a("p",[t._v("描述符可同时具有的键值：")]),t._v(" "),t._m(6),t._v(" "),a("p",[t._v("所以我们有以下这种效果：")]),t._v(" "),t._m(7),t._v(" "),a("p",[t._v("代码如下：")]),t._v(" "),t._m(8),t._m(9),t._v(" "),t._m(10),t._v(" "),a("p",[t._v("Mmmmm，我一直以为 "),t._m(11),t._v(" 是个新属性，直到我"),a("s",[t._v("膝盖中了一箭")]),t._v("看了"),a("a",{attrs:{href:"https://caniuse.com/#search=MutationObserver",target:"_blank",rel:"noopener noreferrer"}},[t._v("can i use"),a("OutboundLink")],1),t._v(" 。")]),t._v(" "),t._m(12),t._v(" "),a("p",[t._v("本来鱼头我也不知道有这属性，但是最近在工作上遇到了需要监听页面元素变动的场景，然后就了解到了这个API。")]),t._v(" "),a("p",[t._v("于是鱼头便看了"),a("a",{attrs:{href:"https://dom.spec.whatwg.org/#mutation-observers",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),a("OutboundLink")],1),t._v("，发现是个好牛逼的API。")]),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),a("p",[t._v("按"),a("a",{attrs:{href:"https://dom.spec.whatwg.org/#mutation-observers",target:"_blank",rel:"noopener noreferrer"}},[t._v("WHATWG"),a("OutboundLink")],1),t._v("的定义，它的执行逻辑如下：")]),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),a("p",[t._v("它有以下三个方法：")]),t._v(" "),t._m(19),t._v(" "),a("p",[t._v("options选项可选参数（以下属性可设置为true）：")]),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),a("p",[t._v("下面我们就通过实际的代码来监听戈多的位置变化。")]),t._v(" "),a("p",[t._v("效果还是如同上图。")]),t._v(" "),a("p",[t._v("代码如下：")]),t._v(" "),t._m(22),t._m(23),t._v(" "),t._m(24),t._v(" "),a("p",[t._v("除了监听元素的变动，还有什么方式可以知道戈多的位置呢？")]),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),a("p",[t._v("戈多心想：“又来一个Observer ？别监听了，我去找你们就是了，嘤嘤嘤。 ”")]),t._v(" "),t._m(27),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),t._m(30),t._v(" "),t._m(31),t._v(" "),t._m(32),t._v(" "),t._m(33),t._v(" "),t._m(34),t._v(" "),a("p",[t._v("可选择方法如下：")]),t._v(" "),t._m(35),t._v(" "),t._m(36),t._v(" "),a("p",[t._v("所以怎么用这个API来监听戈多的位置呢？")]),t._v(" "),a("p",[t._v("先看效果（真特么简陋）")]),t._v(" "),t._m(37),t._v(" "),a("p",[t._v("代码如下：")]),t._v(" "),t._m(38),t._m(39),t._v(" "),a("p",[t._v("其实如果肯花时间去研究，利用好上述三个API，是可以实现很多很有趣的效果的，上面的只是一个初尝的DEMO，真正在项目里是可以实现很多很重要的功能。")]),t._v(" "),a("p",[t._v("不过戈戈 与 狄狄也等待戈多快70年了，就像痴情的女生等待远走的渣男一样，就是不来好歹也给个音信啊。")]),t._v(" "),a("p",[t._v("戈多心想：“我不过是迷路了么，嘤嘤嘤”")]),t._v(" "),t._m(40),t._v(" "),t._m(41)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"像监听页面一样监听戈多的动态"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#像监听页面一样监听戈多的动态","aria-hidden":"true"}},[this._v("#")]),this._v(" 像监听页面一样监听戈多的动态")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("不知道各位童鞋有木有看过 "),s("strong",[this._v("《等待戈多》")]),this._v(" 这部出名的荒诞戏剧 。其剧情大概就是 戈戈 与 狄狄 等待 戈多 的过程中发生的一些琐事，一共两幕。等了这么多年，也不知道 戈多 现在在哪，赴约了没有。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/js/godot/wait.jpg",alt:"wait"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"object-defineproperty"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#object-defineproperty","aria-hidden":"true"}},[this._v("#")]),this._v(" Object.defineProperty")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("关于 "),s("strong",[s("code",[this._v("Object.defineProperty")])]),this._v(" 这个属性大家应该很熟（毕竟是各类面经中的常客），但还是要简单介绍下~")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[s("code",[this._v("Object.defineProperty")])]),this._v(" 允许精确添加或修改对象的属性。通过赋值操作添加的普通属性是可枚举的，能够在属性枚举期间呈现出来。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v("configurable")]),t._v(" "),a("th",[t._v("enumerable")]),t._v(" "),a("th",[t._v("value")]),t._v(" "),a("th",[t._v("writable")]),t._v(" "),a("th",[t._v("get")]),t._v(" "),a("th",[t._v("set")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("数据描述符")]),t._v(" "),a("td",[t._v("Yes")]),t._v(" "),a("td",[t._v("Yes")]),t._v(" "),a("td",[t._v("Yes")]),t._v(" "),a("td",[t._v("Yes")]),t._v(" "),a("td",[t._v("No")]),t._v(" "),a("td",[t._v("No")])]),t._v(" "),a("tr",[a("td",[t._v("存取描述符")]),t._v(" "),a("td",[t._v("Yes")]),t._v(" "),a("td",[t._v("Yes")]),t._v(" "),a("td",[t._v("No")]),t._v(" "),a("td",[t._v("No")]),t._v(" "),a("td",[t._v("Yes")]),t._v(" "),a("td",[t._v("Yes")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/js/godot/gd1.gif",alt:"gd1"}})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token string"}},[t._v("'use strict'")]),t._v("\nObject"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("defineProperty")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("godot"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'style'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("get")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getAttribute")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'style'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("set")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("setAttribute")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'style'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" distance "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("noLeftTree"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetLeft "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetLeft"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("distance "),a("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("51")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'戈多没来，我们先各自干各自的活吧'")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'戈多快到了，走，我们集合去'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{attrs:{class:"token function-variable function"}},[t._v("whereIsGodot")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" start "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("start"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" d "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{attrs:{class:"token function-variable function"}},[t._v("godotRun")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("noLeftTree"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetLeft "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("51")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" d"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    d"),a("span",{attrs:{class:"token operator"}},[t._v("++")]),t._v("\n                    godot"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v("`left: ")]),a("span",{attrs:{class:"token interpolation"}},[a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("d"),a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{attrs:{class:"token string"}},[t._v("px`")])]),t._v("\n                    "),a("span",{attrs:{class:"token function"}},[t._v("godotRun")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("16")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{attrs:{class:"token function"}},[t._v("godotRun")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("简单来说就是使用 "),s("strong",[s("code",[this._v("Object.defineProperty")])]),this._v(" 监听戈多的位置变化，然后当戈多移动到集合地点附近时，等待戈多的俩哥们就可以去赴约了。通过上述的代码，我们可以知道 "),s("code",[this._v("whereIsGodot")]),this._v(" 函数只负责戈多的位置移动，但是监听权在等待戈多的两个人那里，这样保证了代码语义化的同时，耦合度也尽可能地小。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"mutationobserver"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mutationobserver","aria-hidden":"true"}},[this._v("#")]),this._v(" MutationObserver")])},function(){var t=this.$createElement,s=this._self._c||t;return s("strong",[s("code",[this._v("MutationObserver")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/js/godot/caniuse1.png",alt:"caniuse"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/js/godot/dc.jpg",alt:"dc"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"所以这到底是个啥？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#所以这到底是个啥？","aria-hidden":"true"}},[this._v("#")]),this._v(" 所以这到底是个啥？")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("简单来说就是一个可以监听 "),s("strong",[this._v("DOM Tree")]),this._v(" 变动的API，名字直译就是 "),s("strong",[this._v("“突变观察者”")]),this._v(" 。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("先执行监听的微任务队列；")]),this._v(" "),s("li",[this._v("执行完微任务队列之后就把所监听的记录封装成一个数组来处理；")]),this._v(" "),s("li",[this._v("然后返回处理结果。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"所以具体怎么用？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#所以具体怎么用？","aria-hidden":"true"}},[this._v("#")]),this._v(" 所以具体怎么用？")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[a("strong",[t._v("突变观察者")]),t._v(" 是个构造器，它接受一个回调并返回一个 "),a("strong",[t._v("节点记录列表（sequence "),a("code",[t._v("<MutationRecord>")]),t._v(" ）")]),t._v(" 以及 "),a("strong",[t._v("构造的参数对象（MutationObersver）")]),t._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("observe(target, options)：监听对象，接受两个参数，一个是监听的对象（target），一个是观察的选项(options)；")]),this._v(" "),s("li",[this._v("disconnect()：断开监听的功能；")]),this._v(" "),s("li",[this._v("takeRecords()：清空监听的队列，并返回结果。")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ol",[a("li",[t._v("childList：监听目标子节点的变化；")]),t._v(" "),a("li",[t._v("attributes：监听目标属性的变化；")]),t._v(" "),a("li",[t._v("characterData：监听目标数据的变化；")]),t._v(" "),a("li",[t._v("subtree：监听目标以及其后代的变化；")]),t._v(" "),a("li",[t._v("attributeOldValue：监听目标属性变化前的具体值；")]),t._v(" "),a("li",[t._v("characterDataOldValue：监听目标数据变化前的具体值；")]),t._v(" "),a("li",[t._v("attributeFilter：不需要监听的属性列表（此属性填入过滤的属性列表）。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"如何监听戈多的位置？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何监听戈多的位置？","aria-hidden":"true"}},[this._v("#")]),this._v(" 如何监听戈多的位置？")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" godot "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("querySelector")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'#godot'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" config "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    childList"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    attributes"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    characterData"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    subtree"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    attributeOldValue"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    characterDataOldValue"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{attrs:{class:"token function-variable function"}},[t._v("mutationCallback")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" mutationsList "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            target"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                offsetLeft"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" godotPos\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" mutationsList\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" distance "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("noLeftTree"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetLeft "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v(" godotPos"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("distance "),a("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("51")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'戈多没来，我们先各自干各自的活吧'")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'戈多快到了，走，我们集合去'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" observer "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("MutationObserver")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mutationCallback"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nobserver"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("observe")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("godot"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" config"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{attrs:{class:"token function-variable function"}},[t._v("whereIsGodot")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" start "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("start"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("let")]),t._v(" d "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v("\n        "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{attrs:{class:"token function-variable function"}},[t._v("godotRun")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("noLeftTree"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetLeft "),a("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("51")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v(">=")]),t._v(" d"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    d"),a("span",{attrs:{class:"token operator"}},[t._v("++")]),t._v("\n                    godot"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token template-string"}},[a("span",{attrs:{class:"token string"}},[t._v("`left: ")]),a("span",{attrs:{class:"token interpolation"}},[a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("d"),a("span",{attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{attrs:{class:"token string"}},[t._v("px`")])]),t._v("\n                    "),a("span",{attrs:{class:"token function"}},[t._v("godotRun")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("16")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                observer"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("disconnect")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{attrs:{class:"token function"}},[t._v("godotRun")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("因为鱼头在业务需要对某个已经完善的功能在部分操作监听数据变动，如果对原来的代码进行改动，也不是一件轻松的事，而且这样子代码太冗长，耦合度也会较高，所以就选择了用 "),s("strong",[this._v("突变观察者")]),this._v(" 来实现，效果还是不错的。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"intersection-observer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#intersection-observer","aria-hidden":"true"}},[this._v("#")]),this._v(" Intersection Observer")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("如果有那就是 "),s("strong",[this._v("Intersection Observer")]),this._v(" 了。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"这又是个啥？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#这又是个啥？","aria-hidden":"true"}},[this._v("#")]),this._v(" 这又是个啥？")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/js/godot/weiqu2.jpg",alt:"委屈"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[s("code",[this._v("IntersectionObserver")])]),this._v(" 直译是 "),s("strong",[this._v("“交叉观察者”")]),this._v(" ，这个API使开发人员能够监听目标元素与根（祖先或视口）元素交叉状态的方法。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("它的用法跟 "),s("strong",[s("code",[this._v("MutationObserver")])]),this._v(" 相似，同样是个构造器，它接受一个 "),s("strong",[this._v("回调函数(callback(entries))")]),this._v(" 以及 "),s("strong",[this._v("可选参数对象（options）")]),this._v(" 。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"所以又怎么用？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#所以又怎么用？","aria-hidden":"true"}},[this._v("#")]),this._v(" 所以又怎么用？")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("首先 "),s("strong",[this._v("callback")]),this._v(" 会返回一个 "),s("strong",[this._v("监听属性对象（IntersectionObserverEntry）")]),this._v(" ，其具体属性如下：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ol",[a("li",[t._v("time：可见性发生变化的时间，是个双精度的毫秒时间戳；")]),t._v(" "),a("li",[t._v("rootBounds：根元素的盒子区域信息，有根元素则返回 "),a("code",[t._v("getBoundingClientRect()")]),t._v(" 的值，没有则返回 "),a("code",[t._v("null")]),t._v("；")]),t._v(" "),a("li",[t._v("boundingClientRect：监听元素的盒子区域信息；")]),t._v(" "),a("li",[t._v("intersectionRect：监听元素与根元素的交叉区域信息；")]),t._v(" "),a("li",[t._v("isIntersecting：判断监听元素是否与根元素相交，返回布尔值；")]),t._v(" "),a("li",[t._v("intersectionRatio：监听元素的可见比例，即"),a("code",[t._v("intersectionRect / boundingClientRect")]),t._v(" 完全可见时为1，完全不可见时小于等于0；")]),t._v(" "),a("li",[t._v("target：监听的目标元素。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("options")]),this._v(" 可选参数如下：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("root：与监听对象相交的根元素，如果没有，返回隐式根；")]),this._v(" "),s("li",[this._v("rootMargin：跟CSS的"),s("code",[this._v("margin")]),this._v("一样，发生交叉的偏移量；")]),this._v(" "),s("li",[this._v("threshold：触发回调的阈值，填入数组，范围在0~1之间，决定发生监听事件的交叉比例。")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ol",[a("li",[t._v("IntersectionObserver.observe()：开始监听；")]),t._v(" "),a("li",[t._v("IntersectionObserver.disconnect()：停止监听；")]),t._v(" "),a("li",[t._v("IntersectionObserver.takeRecords()：返回所有观察目标的 "),a("strong",[t._v("IntersectionObserverEntry")]),t._v(" 对象数组；")]),t._v(" "),a("li",[t._v("IntersectionObserver.unobserve()：使"),a("code",[t._v("IntersectionObserver")]),t._v("停止监听特定目标元素。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"戈多，你今晚到底是来还是不来？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#戈多，你今晚到底是来还是不来？","aria-hidden":"true"}},[this._v("#")]),this._v(" 戈多，你今晚到底是来还是不来？")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/js/godot/godot3.gif",alt:"godot3"}})])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token style language-css"}},[t._v("\n    "),a("span",{attrs:{class:"token selector"}},[t._v("*")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v("margin")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v("padding")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v("box-sizing")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" border-box"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token selector"}},[t._v("html,\n    body")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v("width")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100%"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v("height")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 200%"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token selector"}},[t._v("noLeftTree")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v("position")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" fixed"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v("left")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v("top")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v("width")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100%"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v("height")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100px"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v("background")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" #FFF"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token selector"}},[t._v("godot,\n    estragon,\n    vladimir")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v("position")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" absolute"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v("width")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 50px"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v("height")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 50px"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v("border-radius")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 50%"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v("border")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1px solid"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v("text-align")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" center"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token selector"}},[t._v("estragon")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v("top")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v("left")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token selector"}},[t._v("vladimir")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v("top")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v("right")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token selector"}},[t._v("godot")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v("left")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("calc")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("50% - 25px"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v("top")]),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 1000px"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")]),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("noLeftTree")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("noLeftTree"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("estragon")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("estragon"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("戈戈"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("estragon")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("vladimir")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("vladimir"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("狄狄"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("vladimir")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("noLeftTree")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("godot")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("godot"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("戈多"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("godot")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}},[t._v("\n    "),a("span",{attrs:{class:"token string"}},[t._v("'use strict'")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" godot "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("querySelector")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'#godot'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" noLeftTree "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("querySelector")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'#noLeftTree'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{attrs:{class:"token function-variable function"}},[t._v("ioCallback")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" entries "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("entries"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("intersectionRatio "),a("span",{attrs:{class:"token operator"}},[t._v("<=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'戈多没来，我们先各自干各自的活吧'")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'戈多快到了，走，我们集合去'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ioConfig "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        threshold"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0.25")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0.5")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("0.75")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" io "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("IntersectionObserver")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ioCallback"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ioConfig"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    io"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("observe")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("godot"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")]),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"后记"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#后记","aria-hidden":"true"}},[this._v("#")]),this._v(" 后记")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/js/godot/yingyingying.jpg",alt:"img"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("如果你喜欢探讨技术，或者对本文有任何的意见或建议，非常欢迎加鱼头微信好友一起探讨，当然，鱼头也非常希望能跟你一起聊生活，聊爱好，谈天说地。\n鱼头的微信号是：krisChans95\n也可以扫码关注公众号，订阅更多精彩内容。\n"),s("img",{attrs:{src:"https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/base/qrcode-all1.png",alt:"https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/base/qrcode-all1.png"}})])}],!1,null,null,null);s.default=o.exports}}]);
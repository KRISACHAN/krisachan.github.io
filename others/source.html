<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>『初中级前端必看』谈谈我是怎么看源码的 | 鱼头的Web海洋</title>
    <meta name="description" content="让你的Web学习如同玩耍在海洋一样快乐" />
    <link rel="icon" href="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/base/blogfavicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.a57752fc.css" as="style"><link rel="preload" href="/assets/js/app.7758c0f1.js" as="script"><link rel="preload" href="/assets/js/48.9127162c.js" as="script"><link rel="prefetch" href="/assets/js/2.ee28eecc.js"><link rel="prefetch" href="/assets/js/3.4f75b704.js"><link rel="prefetch" href="/assets/js/4.bf787673.js"><link rel="prefetch" href="/assets/js/5.478f5ac2.js"><link rel="prefetch" href="/assets/js/6.4c097f64.js"><link rel="prefetch" href="/assets/js/7.58a8b71c.js"><link rel="prefetch" href="/assets/js/8.3f46aa1d.js"><link rel="prefetch" href="/assets/js/9.b22bdfb2.js"><link rel="prefetch" href="/assets/js/10.66b6a51e.js"><link rel="prefetch" href="/assets/js/11.7e6ee11d.js"><link rel="prefetch" href="/assets/js/12.00a57e71.js"><link rel="prefetch" href="/assets/js/13.a3ebb5cb.js"><link rel="prefetch" href="/assets/js/14.24257f57.js"><link rel="prefetch" href="/assets/js/15.e9fbe090.js"><link rel="prefetch" href="/assets/js/16.3274933f.js"><link rel="prefetch" href="/assets/js/17.c44a15a9.js"><link rel="prefetch" href="/assets/js/18.9d746e2b.js"><link rel="prefetch" href="/assets/js/19.baae15bc.js"><link rel="prefetch" href="/assets/js/20.9aaca5ee.js"><link rel="prefetch" href="/assets/js/21.aec3f975.js"><link rel="prefetch" href="/assets/js/22.cba23bf4.js"><link rel="prefetch" href="/assets/js/23.4dd14c76.js"><link rel="prefetch" href="/assets/js/24.7aeb3519.js"><link rel="prefetch" href="/assets/js/25.1defca15.js"><link rel="prefetch" href="/assets/js/26.95a5affe.js"><link rel="prefetch" href="/assets/js/27.658e569c.js"><link rel="prefetch" href="/assets/js/28.cf9f578c.js"><link rel="prefetch" href="/assets/js/29.c241490c.js"><link rel="prefetch" href="/assets/js/30.575fb260.js"><link rel="prefetch" href="/assets/js/31.5909ea61.js"><link rel="prefetch" href="/assets/js/32.fbc6772e.js"><link rel="prefetch" href="/assets/js/33.c3a0c9bf.js"><link rel="prefetch" href="/assets/js/34.2dc66dcd.js"><link rel="prefetch" href="/assets/js/35.a07824d8.js"><link rel="prefetch" href="/assets/js/36.259e126a.js"><link rel="prefetch" href="/assets/js/37.6b8a54ca.js"><link rel="prefetch" href="/assets/js/38.cefea094.js"><link rel="prefetch" href="/assets/js/39.c960ca00.js"><link rel="prefetch" href="/assets/js/40.7b2ead41.js"><link rel="prefetch" href="/assets/js/41.4ac953b2.js"><link rel="prefetch" href="/assets/js/42.9a84c1d2.js"><link rel="prefetch" href="/assets/js/43.17d7ba6b.js"><link rel="prefetch" href="/assets/js/44.6697b9a5.js"><link rel="prefetch" href="/assets/js/45.f13da887.js"><link rel="prefetch" href="/assets/js/46.03a48d34.js"><link rel="prefetch" href="/assets/js/47.099c525e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a57752fc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">鱼头的Web海洋</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><!----> <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>『初中级前端必看』谈谈我是怎么看源码的</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/others/source.html#前言" class="sidebar-link">前言</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/others/source.html#正文" class="sidebar-link">正文</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/others/source.html#看配套说明" class="sidebar-link">看配套说明</a></li><li class="sidebar-sub-header"><a href="/others/source.html#看类型文件" class="sidebar-link">看类型文件</a></li><li class="sidebar-sub-header"><a href="/others/source.html#看注释" class="sidebar-link">看注释</a></li><li class="sidebar-sub-header"><a href="/others/source.html#看测试样例" class="sidebar-link">看测试样例</a></li><li class="sidebar-sub-header"><a href="/others/source.html#看官方例子" class="sidebar-link">看官方例子</a></li><li class="sidebar-sub-header"><a href="/others/source.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/others/source.html#后记" class="sidebar-link">后记</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="『初中级前端必看』谈谈我是怎么看源码的"><a href="#『初中级前端必看』谈谈我是怎么看源码的" aria-hidden="true" class="header-anchor">#</a> 『初中级前端必看』谈谈我是怎么看源码的</h1> <blockquote><ul><li>作者：陈大鱼头</li> <li>github： <a href="https://github.com/KRISACHAN" target="_blank" rel="noopener noreferrer">KRISACHAN<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></blockquote> <h2 id="前言"><a href="#前言" aria-hidden="true" class="header-anchor">#</a> 前言</h2> <p>最近有很多童鞋跟鱼头说，面试的时候动不动就问源码。</p> <p>也有很多童鞋遇到问题的时候，鱼头建议这些童鞋看相关库 / 框架 / 项目的源码。</p> <p>但是也有很多童鞋向鱼头抱怨说：“源码太难了。”</p> <p>那么源码真的是一块难啃的硬骨头吗？</p> <p>其实不是的。</p> <p>作为一个优秀（或说合格）的开源项目，它的代码一定不会是晦涩难懂的。不仅是代码本身，这些项目配套的注释，单元测试，示例代码，函数名以及文档一定是能够很好地辅助你读源码的。</p> <p>下面就让鱼头来跟大家谈谈我自己的一些看源码心得。</p> <p><strong>（注：这不是最佳实践，只算是鱼头个人的经验，不一定适用于所有人，如果你有不同的意见，欢迎在下方评论区域留言。）</strong></p> <h2 id="正文"><a href="#正文" aria-hidden="true" class="header-anchor">#</a> 正文</h2> <h3 id="看配套说明"><a href="#看配套说明" aria-hidden="true" class="header-anchor">#</a> 看配套说明</h3> <p>在看一个开源项目源码之前，鱼头首先会先看其文档，不一定是会细致到各个API，但是会先理解这个项目的背景，思想，以及解决的问题是什么。</p> <p>举个例子，我们来看看一个叫做<a href="https://github.com/gaoding-inc/runtime-hooks" target="_blank" rel="noopener noreferrer">runtime-hooks<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的开源工具库。这里先上部分代码：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">withHookAfter</span> <span class="token punctuation">(</span>originalFn<span class="token punctuation">,</span> hookFn<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> output <span class="token operator">=</span> originalFn<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span>
    hookFn<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span>
    <span class="token keyword">return</span> output
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这段函数我们是看懂了，就是劫持原函数，并且在原函数执行之后，执行我们自己的逻辑。但是如果没有相关的业务经验，我们不一定能理解为什么这么干，不理解就很容易会忘记。</p> <p>但是我们可以看看相关文档里，作者对这个库说明的部分节选：</p> <blockquote><p><strong>假设有一个被业务广泛使用的函数，我们是否能够在既不更改调用它的业务代码，也不更改该函数源码的前提下，在其执行前后注入一段我们自定义的逻辑呢？</strong></p></blockquote> <p>（来源于：<a href="https://zhuanlan.zhihu.com/p/54460682" target="_blank" rel="noopener noreferrer">基于原型链劫持的前端代码插桩实践<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>）</p> <p>哦，那么这么说我们就理解了，通过这种方案，当我们需要入侵某个函数的时候，就不需要再进行一些复杂的hack，魔改动作了。</p> <p>那么我们就理解了这段函数的存在的意义，因为理解，所以这段代码，自然而然的就记住了，以后遇到类似需要的场景也能够轻而易举的相到这个方案。</p> <h3 id="看类型文件"><a href="#看类型文件" aria-hidden="true" class="header-anchor">#</a> 看类型文件</h3> <p>现在有许多的开源项目都是用 <strong>TypeScript</strong> 来写的，既然是如此，通常在根目录下都会有一个<code>.d.ts</code>文件专门定义API类型的。</p> <p>例如我们来看看一个开源的Web IDE库 <a href="https://github.com/ajaxorg/ace" target="_blank" rel="noopener noreferrer">ace.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>看看它根目录下的<code>ace.d.ts</code>里的部分代码：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">EventEmitter</span> <span class="token punctuation">{</span>
    <span class="token function">once</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> callback<span class="token punctuation">:</span> <span class="token builtin">Function</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
    <span class="token function">setDefaultHandler</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> callback<span class="token punctuation">:</span> <span class="token builtin">Function</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
    <span class="token function">removeDefaultHandler</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> callback<span class="token punctuation">:</span> <span class="token builtin">Function</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
    <span class="token function">on</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> callback<span class="token punctuation">:</span> <span class="token builtin">Function</span><span class="token punctuation">,</span> capturing<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
    <span class="token function">addEventListener</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> callback<span class="token punctuation">:</span> <span class="token builtin">Function</span><span class="token punctuation">,</span> capturing<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
    <span class="token function">off</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> callback<span class="token punctuation">:</span> <span class="token builtin">Function</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
    <span class="token function">removeListener</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> callback<span class="token punctuation">:</span> <span class="token builtin">Function</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
    <span class="token function">removeEventListener</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> callback<span class="token punctuation">:</span> <span class="token builtin">Function</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>通过上面的类型注解，我们很容易就能知道每个API的具体用法。</p> <p>鱼头我为什么要拿这个来说呢，因为有的时候要解决的问题，可能只是API熟悉的问题，但是有些开源项目的文档写的并不走心，上述的这个就是这样，所以有的时候为了了解一个API，又不想花太多时间去找具体源码位置时，就可以打开类型文件来看看具体的API使用法则。</p> <h3 id="看注释"><a href="#看注释" aria-hidden="true" class="header-anchor">#</a> 看注释</h3> <p>在我们深入到某一个具体的函数或者文件时，如果我们能先知道它是干啥的，那么对于我们要理解这段代码来说，是事半功倍的。</p> <p>举个例子，我们来看看<a href="https://github.com/reduxjs/redux" target="_blank" rel="noopener noreferrer">redux<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p>在<code>redux/src/createStore.js</code>的开头有这么一段注释：</p> <blockquote><p>Creates a Redux store that holds the state tree.
The only way to change the data in the store is to call <code>dispatch()</code> on it.</p> <p>创建一个保存状态树的Redux仓库。
更改仓库中数据的唯一方法是对其调用<code>dispatch（）</code>。</p></blockquote> <p>哦，那么通过上面的注释，我们就知道<code>dispatch</code>方法是用来对数据进行调度的。而且是唯一的一个改变数据的方法。</p> <p>有意思的是这个文件约300行代码里，估计有100行是注释，那么当我们看完注释之后，即使不看具体实现，也很容易明白它究竟做了什么。</p> <p>当我们再去看具体实现的时候，我们带着“ <strong>它主要是干了这事</strong> ”的想法去看，那么对具体实现的理解就更轻松了。</p> <h3 id="看测试样例"><a href="#看测试样例" aria-hidden="true" class="header-anchor">#</a> 看测试样例</h3> <p>除了上述的几个方法，我们还可以看测试样例。其实测试样例，对于我们理解源码，或迅速上手一个陌生项目来说是非常高效的。</p> <p>例如我们看<a href="https://github.com/vuejs/vuex" target="_blank" rel="noopener noreferrer">vuex<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的<code>vuex/test/unit/store.spec.js</code>里的一个例子：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Store'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'committing mutations'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      state<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        a<span class="token punctuation">:</span> <span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      mutations<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token constant">TEST</span><span class="token punctuation">]</span> <span class="token punctuation">(</span>state<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          state<span class="token punctuation">.</span>a <span class="token operator">+=</span> n
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token constant">TEST</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'dispatching actions, with returned Promise'</span><span class="token punctuation">,</span> done <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      state<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        a<span class="token punctuation">:</span> <span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      mutations<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token constant">TEST</span><span class="token punctuation">]</span> <span class="token punctuation">(</span>state<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          state<span class="token punctuation">.</span>a <span class="token operator">+=</span> n
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      actions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token constant">TEST</span><span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> commit <span class="token punctuation">}</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>resolve <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token function">commit</span><span class="token punctuation">(</span><span class="token constant">TEST</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span>
              <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token constant">TEST</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">expect</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
      <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>即使是不懂vuex的童鞋，通过上述的两个样例，我们也很容易就理解<code>mutations</code>是同步的，而<code>actions</code>是异步的。甚至依靠着这两个样例，我们也能轻松的上手<code>vuex</code>了。</p> <h3 id="看官方例子"><a href="#看官方例子" aria-hidden="true" class="header-anchor">#</a> 看官方例子</h3> <p>还有就是官方例子辣，其实鱼头发现很多童鞋，在学一个库/框架的时候，并不喜欢看官方例子，反而喜欢看网上各种教程，虽然看教程不是不好，但是如果本身该库/框架就有官方例子，那么再去找二手知识，就有点本末倒置了。</p> <p>例如我们看<a href="https://github.com/webpack/webpack" target="_blank" rel="noopener noreferrer">webpack<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>的<code>webpack/examples/typescript</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> ForkTsCheckerWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fork-ts-checker-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">(</span>env <span class="token operator">=</span> <span class="token string">&quot;development&quot;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
	mode<span class="token punctuation">:</span> env<span class="token punctuation">,</span>
	entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		output<span class="token punctuation">:</span> <span class="token string">&quot;./index.ts&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
			<span class="token punctuation">{</span>
				test<span class="token punctuation">:</span> <span class="token regex">/\.tsx?$/</span><span class="token punctuation">,</span>
				loader<span class="token punctuation">:</span> <span class="token string">&quot;ts-loader&quot;</span><span class="token punctuation">,</span>
				options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
					transpileOnly<span class="token punctuation">:</span> <span class="token boolean">true</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		extensions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;.ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.json&quot;</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">ForkTsCheckerWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token keyword">async</span><span class="token punctuation">:</span> env <span class="token operator">===</span> <span class="token string">&quot;production&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>就这样，这是一个可以直接CV的typescript配置，多简单，这样就不需要再去网上找各种不知结果又添加了各种个人理解让你蒙圈的教程了。</p> <h3 id="总结"><a href="#总结" aria-hidden="true" class="header-anchor">#</a> 总结</h3> <p>以上的就是鱼头日常看源码时会关注的一些点。</p> <p>当然这只是鱼头的一些经验总结，不一定适用于每个人。</p> <p>而且鱼头水平有限，也不能保证100%无误。</p> <p>如果各位读者有任何不同意见，或者自己的经验，非常欢迎各位在下方留言区域留言。</p> <h2 id="后记"><a href="#后记" aria-hidden="true" class="header-anchor">#</a> 后记</h2> <p>如果你喜欢探讨技术，或者对本文有任何的意见或建议，非常欢迎加鱼头微信好友一起探讨，当然，鱼头也非常希望能跟你一起聊生活，聊爱好，谈天说地。
鱼头的微信号是：krisChans95
也可以扫码关注公众号，订阅更多精彩内容。
公众号窗口回复『 <strong>前端资料</strong> 』，即可获取约 200M 前端面试资料，不要错过。</p> <p><img src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/base/qrcode-all1.png" alt></p></div> <div class="page-footer content">
    网站备案号：粤ICP备17113436号-1
  </div> <!----> <div class="right-group"><div class="item"><span class="title">加入前端鱼塘</span> <span class="desc">
        扫描二维码回复
        <span class="inner">加群</span> 学习
      </span> <img width="100%" src="https://fish-pond-1253945200.cos.ap-guangzhou.myqcloud.com/img/base/wx-qrcode.jpg"></div></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <div></div></div></div>
    <script src="/assets/js/48.9127162c.js" defer></script><script src="/assets/js/app.7758c0f1.js" defer></script>
    <!-- Hotjar Tracking Code for yuchengkai.cn -->
    <script>
      var _hmt = _hmt || []
      ;(function() {
        var hm = document.createElement('script')
        hm.src = 'https://hm.baidu.com/hm.js?52ee35894430604d0d3ce3b9c089adf9'
        var s = document.getElementsByTagName('script')[0]
        s.parentNode.insertBefore(hm, s)
      })()
    </script>
  </body>
</html>
